<?php

function juanrueda_response_init() {
  $path = drupal_get_path('module', 'juanrueda_response');
  drupal_add_js($path . '/juanrueda_response.js');

  $path_theme = drupal_get_path('theme', 'juan_rueda');


  if(strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 7') !== FALSE) {

    drupal_add_js(array('ei7' => 1), 'setting');

    drupal_add_css($path_theme . '/css/ie7.css');
  }

 }


function juanrueda_response_css_alter(&$css) {
  if (preg_match('/MSIE [7]./', $_SERVER['HTTP_USER_AGENT'])) {

    $exclude = array(
      'sites/all/themes/omega/alpha/css/alpha-mobile.css' => FALSE,
      'sites/all/themes/juan_rueda/css/juan-rueda-alpha-default.css' => FALSE,
      'sites/all/themes/juan_rueda/css/juan-rueda-alpha-default-normal.css' => FALSE,
      'sites/all/themes/omega/alpha/css/grid/alpha_default/normal/alpha-default-normal-12.css' => FALSE,
      'sites/all/themes/juan_rueda/css/juan-rueda-alpha-default-narrow.css' => FALSE,
      'sites/all/themes/omega/alpha/css/grid/alpha_default/narrow/alpha-default-narrow-12.css' > FALSE,
      'sites/all/themes/juan_rueda/css/juan-rueda-alpha-default-wide.css' => FALSE,
      'sites/all/themes/omega/alpha/css/grid/alpha_default/wide/alpha-default-wide-12.css' => FALSE,

    );
    $css = array_diff_key($css, $exclude);

  }

}
